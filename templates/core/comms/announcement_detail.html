{% extends 'base.html' %}

{% block title %}{{ announcement.title }}{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <a href="{% url 'announcements_list' %}" class="text-ch-gold hover:underline text-sm mb-4 inline-block">
        &larr; Back to Announcements
    </a>

    <article class="bg-ch-dark rounded-lg p-8">
        <div class="flex items-center gap-2 mb-4">
            {% if announcement.is_pinned %}
            <span class="bg-ch-gold/20 text-ch-gold text-xs px-2 py-1 rounded flex items-center gap-1">
                <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                </svg>
                Pinned
            </span>
            {% endif %}
            {% if announcement.priority == 'urgent' %}
            <span class="bg-red-500/20 text-red-400 text-xs px-2 py-1 rounded font-medium">Urgent</span>
            {% elif announcement.priority == 'important' %}
            <span class="bg-orange-500/20 text-orange-400 text-xs px-2 py-1 rounded font-medium">Important</span>
            {% endif %}
        </div>

        <h1 class="text-3xl font-bold mb-4">{{ announcement.title }}</h1>

        <div class="flex items-center gap-4 text-sm text-gray-400 mb-6 pb-6 border-b border-gray-700">
            <span>By {{ announcement.author.display_name|default:announcement.author.username }}</span>
            <span>&bull;</span>
            <span>{{ announcement.created_at|date:"F j, Y \a\t g:i A" }}</span>
        </div>

        <div class="prose prose-invert max-w-none markdown-content">
            {{ announcement.content|linebreaks }}
        </div>

        {% if announcement.target_teams %}
        <div class="mt-6 pt-6 border-t border-gray-700">
            <p class="text-sm text-gray-400">
                <span class="font-medium">Target Teams:</span>
                {% for team in announcement.target_teams %}
                <span class="bg-ch-gray px-2 py-1 rounded text-xs ml-1">{{ team }}</span>
                {% endfor %}
            </p>
        </div>
        {% endif %}
    </article>
</div>
{% endblock %}
