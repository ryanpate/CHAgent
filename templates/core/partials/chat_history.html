<!-- Chat History List - rendered inside modal -->
{% if sessions %}
<div class="space-y-2">
    {% for session in sessions %}
    <button hx-get="{% url 'chat_load_session' session.session_id %}"
            hx-target="#chat-messages"
            hx-swap="innerHTML"
            onclick="closeHistoryModal()"
            class="w-full text-left bg-ch-gray hover:bg-gray-600 rounded-lg p-3 transition group">
        <div class="flex justify-between items-start mb-1">
            <span class="text-xs text-gray-400">{{ session.last_message|timesince }} ago</span>
            <span class="text-xs text-gray-500">{{ session.message_count }} messages</span>
        </div>
        <p class="text-sm text-gray-200 line-clamp-2 group-hover:text-white">
            {% if search_query %}
                {{ session.preview }}
            {% else %}
                {{ session.preview }}
            {% endif %}
        </p>
    </button>
    {% endfor %}
</div>
{% else %}
<div class="text-center py-8 text-gray-400">
    {% if search_query %}
    <svg class="w-12 h-12 mx-auto mb-3 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
    </svg>
    <p>No conversations found for "{{ search_query }}"</p>
    {% else %}
    <svg class="w-12 h-12 mx-auto mb-3 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
    </svg>
    <p>No past conversations yet</p>
    <p class="text-sm mt-1">Start chatting with Aria to build your history</p>
    {% endif %}
</div>
{% endif %}
